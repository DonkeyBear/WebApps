function transpose(){var e={C:"[I]","C#":"[I#]",D:"[II]","D#":"[II#]",E:"[III]",F:"[IV]","F#":"[IV#]",G:"[V]","G#":"[V#]",A:"[VI]","A#":"[VI#]",B:"[VII]"},t={"#b":"","b#":"","E#":"F",Fb:"E","B#":"C",Cb:"B","C##":"D","D##":"E","F##":"G","G##":"A","A##":"B"},n=document.getElementById("chordSheet").value,l=document.getElementById("select-transpose-type").value,d=Number(document.getElementById("transpose-value").value);if(n=(n=n.replaceAll("♯","#")).replaceAll("♭","b"),0!=(d>=-11&&d<=11)){"capo"==l&&(d=0-d);for(let t=0;t<12;t++)n=n.replaceAll(Object.keys(e)[t],Object.values(e)[t]);for(let t=0;t<12;t++){let l=t+d;l>=12?l-=12:l<0&&(l+=12),n=n.replaceAll(Object.values(e)[t],Object.keys(e)[l])}for(let e=0;e<11;e++)n=n.replaceAll(Object.keys(t)[e],Object.values(t)[e]);n=(n=(n=n.replaceAll("\n","<br>")).replaceAll(" ","&nbsp;")).replaceAll(/([A-G](#|b)?)(\(?(M|maj|major|m|min|minor|dim|sus|dom|aug)?(\+|-|add)?\d*\)?)(\+|-)?\d*\(?(M|maj|major)?\d*\)?(\/([A-G](#|b)?))?/g,'<span class="chordBlue">$&</span>'),document.getElementById("output").innerHTML=n}else alert("請輸入 -11 到 11 之間的值！")}function clearSheetTextArea(){document.getElementById("chordSheet").value="",document.getElementById("transpose-value").value="",document.getElementById("chordSheet").focus()}function changeFontSize(e){let t=document.getElementById("fontSize").innerHTML;0!=(t=Number(t)+e)&&(document.getElementById("fontSize").innerHTML=t,document.getElementById("output").style.cssText+="font-size: "+t+"px;")}function changeLineHeight(e){let t=document.getElementById("lineHeight").innerHTML;(t=Number(t)+e)<0||(document.getElementById("lineHeight").innerHTML=t,document.getElementById("output").style.cssText+="line-height: "+t+"px;")}function changePaddingLeft(e){let t=document.getElementById("padding").innerHTML;t<0||t>100||(t=Number(t)+e,document.getElementById("padding").innerHTML=t,document.getElementById("output").style.cssText+="padding-left: "+t+"%;")}